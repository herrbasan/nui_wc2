<header>
	<h1>Slider</h1>
</header>

<section>
	<h2>Overview</h2>
	<p>The <code>&lt;nui-slider&gt;</code> component wraps a native <code>&lt;input type="range"&gt;</code> with a custom visual design. It uses <code>nui.util.enableDrag</code> for smooth touch and mouse interaction with a large hit area but slim visual appearance.</p>
</section>

<section>
	<h2>Basic Usage</h2>
	<p>Wrap a native range input. The component automatically creates the visual track, fill, and thumb.</p>
	
	<div class="demo-container">
		<nui-slider id="demo-slider-1">
			<input type="range" min="0" max="100" value="50">
		</nui-slider>
		<div class="drag-value-display">
			Value: <span id="slider-value-1">50</span>
		</div>
	</div>

	<nui-code>
		<pre><code data-lang="html">&lt;nui-slider&gt;
    &lt;input type="range" min="0" max="100" value="50"&gt;
&lt;/nui-slider&gt;</code></pre>
	</nui-code>
</section>

<section>
	<h2>Custom Range</h2>
	<p>Set <code>min</code>, <code>max</code>, and <code>step</code> on the native input.</p>
	
	<div class="demo-container">
		<nui-slider id="demo-slider-2">
			<input type="range" min="0" max="10" step="1" value="5">
		</nui-slider>
		<div class="drag-value-display">
			Value: <span id="slider-value-2">5</span> / 10
		</div>
	</div>

	<nui-code>
		<pre><code data-lang="html">&lt;nui-slider&gt;
    &lt;input type="range" min="0" max="10" step="1" value="5"&gt;
&lt;/nui-slider&gt;</code></pre>
	</nui-code>
</section>

<section>
	<h2>Events</h2>
	<p>Listen to native <code>input</code> (continuous) and <code>change</code> (on release) events.</p>
	
	<div class="demo-container">
		<nui-slider id="demo-slider-3">
			<input type="range" min="0" max="100" value="25">
		</nui-slider>
		<div class="drag-value-display">
			<span id="slider-events">Drag the slider...</span>
		</div>
	</div>

	<nui-code>
		<pre><code data-lang="javascript">const slider = document.querySelector('nui-slider');
const input = slider.querySelector('input');

input.addEventListener('input', (e) => {
    console.log('Value:', e.target.value);
});

input.addEventListener('change', (e) => {
    console.log('Final value:', e.target.value);
});</code></pre>
	</nui-code>
</section>

<section>
	<h2>The enableDrag Utility</h2>
	<p>The slider component uses <code>nui.util.enableDrag</code> internally. You can use this utility directly for custom drag interactions like video scrubbers or 2D controls.</p>
	
	<nui-code>
		<pre><code data-lang="javascript">// Enable drag on any element
const cleanup = nui.util.enableDrag(element, (data) => {
    // data.type: 'start', 'move', or 'end'
    // data.x, data.y: position relative to element
    // data.percentX, data.percentY: 0-1 range
    // data.clientX, data.clientY: screen coordinates
    // data.isTouch: true if touch event
});

// Call cleanup() to remove listeners</code></pre>
	</nui-code>
</section>

<script type="nui/page">
	function init(element, params) {
		function bindValueMirror(sliderSelector, outputSelector) {
			const input = element.querySelector(sliderSelector);
			const output = element.querySelector(outputSelector);
			if (!input || !output) return;

			output.textContent = input.value;
			input.addEventListener('input', () => {
				output.textContent = input.value;
			});
		}

		bindValueMirror('#demo-slider-1 input', '#slider-value-1');
		bindValueMirror('#demo-slider-2 input', '#slider-value-2');

		const slider3 = element.querySelector('#demo-slider-3 input');
		const events = element.querySelector('#slider-events');
		if (slider3 && events) {
			events.textContent = 'Drag the slider...';
			slider3.addEventListener('input', () => {
				events.textContent = 'input: ' + slider3.value;
			});
			slider3.addEventListener('change', () => {
				events.textContent = 'change (final): ' + slider3.value;
			});
		}
	}
</script>