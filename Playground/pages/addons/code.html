<header>
	<h1>Code Component</h1>
		<p class="lead">Lightweight syntax highlighting for documentation and code examples</p>
	</header>
	
	<section>
		<h2>Overview</h2>
		<p>
			The <code>&lt;nui-code&gt;</code> component provides minimal syntax highlighting (~6.8KB gzipped).
			It's an optional module that lazy-loads only when needed. Perfect for documentation sites
			that need basic code formatting without heavy dependencies.
		</p>
		
		<h3>Features</h3>
		<ul>
			<li><strong>Automatic Language Detection</strong> - Detects HTML, CSS, JavaScript, TypeScript, and JSON</li>
			<li><strong>Lazy Loading</strong> - Module loads only when <code>&lt;nui-code&gt;</code> elements exist</li>
			<li><strong>Zero Configuration</strong> - Just wrap your code blocks, highlighting happens automatically</li>
			<li><strong>Minimal Size</strong> - ~6.8KB total (JS + CSS), no dependencies</li>
			<li><strong>Web-Focused</strong> - Optimized for the 5 core web languages, not a general-purpose highlighter</li>
		</ul>
	</section>
	
	<section>
		<h2>Usage</h2>
		<p>Wrap your code blocks with <code>&lt;nui-code&gt;</code>:</p>
		<nui-code>
			<script type="example" data-lang="html">
<nui-code>
	<pre><code>
// Your code here
	</code></pre>
</nui-code>
			</script>
		</nui-code>
		
		<h3>Explicit Language Specification</h3>
		<p>Use <code>data-lang</code> attribute to force a specific language:</p>
		<nui-code>
			<script type="example" data-lang="html">
<nui-code>
	<pre><code data-lang="js">
console.log('Explicitly JavaScript');
	</code></pre>
</nui-code>
			</script>
		</nui-code>
	</section>
	
	<section>
		<h2>Supported Languages</h2>
		<p>Focused on the 5 core web development languages:</p>
		
		<h3>HTML</h3>
		<p>Highlights tags, attributes, comments, and text content:</p>
		<nui-code>
			<script type="example" data-lang="html">
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sample Page</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<!-- Main content area -->
	<main class="container">
		<h1 id="heading">Welcome</h1>
		<p>This is a <strong>sample</strong> paragraph.</p>
		<img src="image.jpg" alt="Description" />
	</main>
	<script src="app.js"></script>
</body>
</html>
			</script>
		</nui-code>
		
		<h3>CSS</h3>
		<p>Highlights selectors, properties, values, and comments:</p>
		<nui-code>
			<script type="example" data-lang="css">
/* Base styles */
:root {
	--primary-color: #007bff;
	--spacing: 1rem;
}

.container {
	display: flex;
	flex-direction: column;
	gap: var(--spacing);
	padding: 1rem 2rem;
	background: linear-gradient(to bottom, #fff, #f5f5f5);
}

#heading {
	font-size: 2rem;
	font-weight: bold;
	color: var(--primary-color);
}

@media (min-width: 768px) {
	.container {
		flex-direction: row;
		max-width: 1200px;
		margin: 0 auto;
	}
}

/* Pseudo-selectors and attribute selectors */
a:hover,
a:focus {
	text-decoration: underline;
}

button[disabled] {
	opacity: 0.5;
	cursor: not-allowed;
}
			</script>
		</nui-code>
		
		<h3>JavaScript</h3>
		<p>Highlights keywords, strings, numbers, comments, and operators:</p>
		<nui-code>
			<script type="example" data-lang="js">
// ES6+ JavaScript examples
import { Component } from './framework.js';
export default class App extends Component {
	constructor(config) {
		super(config);
		this.state = {
			count: 0,
			items: [],
			enabled: true
		};
	}
	
	// Method with various syntax elements
	async fetchData(url) {
		try {
			const response = await fetch(url);
			const data = await response.json();
			return data;
		} catch (error) {
			console.error('Failed to fetch:', error);
			throw new Error(`Request failed: ${error.message}`);
		}
	}
	
	// Arrow functions and template literals
	increment = () => {
		this.setState({ count: this.state.count + 1 });
		console.log(`Count is now: ${this.state.count}`);
	};
	
	// Various operators and keywords
	calculate(a, b) {
		if (a === null || b === undefined) {
			return 0;
		}
		
		const result = (a + b) * 2 - 10 / 5;
		const isValid = result > 0 && result < 100;
		
		return isValid ? result : null;
	}
	
	// Loops and conditionals
	processItems() {
		for (let i = 0; i < this.state.items.length; i++) {
			const item = this.state.items[i];
			
			if (item.enabled) {
				continue;
			}
			
			while (item.retries > 0) {
				item.retries--;
				break;
			}
		}
		
		// Modern array methods
		const filtered = this.state.items
			.filter(item => item.enabled)
			.map(item => ({ ...item, processed: true }))
			.reduce((acc, item) => acc + item.value, 0);
		
		return filtered;
	}
	
	// RegExp and special cases
	validateEmail(email) {
		const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
		return regex.test(email);
	}
}

/* Multi-line comment
   covering multiple lines
   with various content */
const numbers = [1, 2, 3, 4.5, -10, 0xFF, 0b1010];
const strings = ['single', "double", `template ${variable}`];
const booleans = [true, false, null, undefined, NaN, Infinity];
			</script>
		</nui-code>
		
		<h3>TypeScript</h3>
		<p>Extends JavaScript with type annotations and interfaces:</p>
		<nui-code>
			<script type="example" data-lang="typescript">
interface User {
	id: number;
	name: string;
	email: string;
	role: 'admin' | 'user';
}

type Callback<T> = (data: T) => void;

class UserService {
	private users: User[] = [];
	
	async fetchUser(id: number): Promise<User | null> {
		const response = await fetch(`/api/users/${id}`);
		if (!response.ok) return null;
		return response.json() as Promise<User>;
	}
	
	processUsers<T extends User>(callback: Callback<T[]>): void {
		callback(this.users as T[]);
	}
}

enum Status {
	Active = 1,
	Inactive = 0
}
			</script>
		</nui-code>
		
		<h3>JSON</h3>
		<p>Data interchange format with key-value pairs:</p>
		<nui-code>
			<script type="example" data-lang="json">
{
	"name": "Example Project",
	"version": "1.0.0",
	"config": {
		"debug": true,
		"port": 3000,
		"maxConnections": null
	},
	"features": ["auth", "api", "websockets"],
	"dependencies": {
		"express": "4.18.2",
		"typescript": "5.0.0"
	}
}
			</script>
		</nui-code>
		
		<h3>Additional Languages</h3>
		<p>The component safely displays code in other languages (Python, Ruby, PHP, Java, C/C++, Bash, XML, Markdown, etc.) without syntax highlighting. The focus is on the 5 core web development languages—HTML, CSS, JavaScript, TypeScript, and JSON—done exceptionally well.</p>
	</section>
	
	<section>
		<h2>Language Detection</h2>
		<p>
			The component uses pattern matching to automatically detect languages. You can also
			explicitly specify the language using the <code>data-lang</code> attribute:
		</p>
		<nui-code>
			<script type="example" data-lang="html">
<pre><code data-lang="typescript">
interface User { name: string; }
</code></pre>
			</script>
		</nui-code>
		
		<h3>Supported Language Identifiers</h3>
		<ul>
			<li><code>html</code>, <code>xml</code></li>
			<li><code>css</code></li>
			<li><code>js</code>, <code>javascript</code></li>
			<li><code>ts</code>, <code>typescript</code></li>
			<li><code>json</code></li>
		</ul>
	</section>
	
	<section>
		<h2>Implementation Details</h2>
		
		<h3>Automatic Detection</h3>
		<p>The component detects languages based on content patterns:</p>
		<nui-code>
			<script type="example" data-lang="js">
// Detection logic (simplified)
if (code.startsWith('<')) {
	language = 'html';
} else if (/"[\w-]+":\s*/.test(code)) {
	language = 'json';
} else if (/\b(interface|type|enum)\b/.test(code)) {
	language = 'typescript';
} else if (/[.#][\w-]+\s*{/.test(code)) {
	language = 'css';
} else if (/\b(const|let|var|function)\b/.test(code)) {
	language = 'js';
}
			</script>
		</nui-code>
		
		<h3>Token System</h3>
		<p>Uses placeholder tokens to prevent nested span corruption during replacement:</p>
		<nui-code>
			<script type="example" data-lang="js">
// Placeholder prevents: <span><span><span></span></span></span>
const token = `~~TOKEN_${tokenId++}~~`;
tokens.push({ 
	token, 
	html: `<span class="hl-keyword">${match}</span>` 
});
return token;
			</script>
		</nui-code>
		
		<h3>Performance</h3>
		<ul>
			<li><strong>Lazy loading</strong> - Module loads only when needed</li>
			<li><strong>One-time processing</strong> - Highlights on component connection only</li>
			<li><strong>No runtime overhead</strong> - Static HTML output after highlighting</li>
			<li><strong>Regex-based</strong> - Fast, simple, no complex parsing</li>
		</ul>
	</section>
	
	<section>
		<h2>Theming</h2>
		<p>
			Colors automatically adapt to light/dark themes using <code>light-dark()</code> CSS function:
		</p>
		<nui-code>
			<script type="example" data-lang="css">
.hl-keyword {
	color: light-dark(#d73a49, #ff7b72);
}

.hl-string {
	color: light-dark(#032f62, #a5d6ff);
}
			</script>
		</nui-code>
		<p>
			Override colors with CSS custom properties for full control over appearance.
		</p>
	</section>
	
	<section class="next-steps">
		<h2>Module Size</h2>
		<p><strong>Current:</strong> ~6.8KB (5 languages: HTML, CSS, JavaScript, TypeScript, JSON)</p>
		<p><strong>Budget remaining:</strong> ~3.2KB within 10KB target</p>
		<p><strong>Philosophy:</strong> Focused quality over broad support - the 5 core web languages done exceptionally well</p>
	</section>
