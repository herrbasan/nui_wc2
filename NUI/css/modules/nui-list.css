/* ################################# NUI-LIST COMPONENT
   Virtualized list component with search, sort, and selection
   Based on reference/nui/css/nui_main.css superlist styles
   Modernized to use NUI theme system and components
*/

/* ################################# CONTAINER */

nui-list {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

/* ################################# HEADER */

.nui-list-header {
	position: relative;
	display: grid;
	grid-template-columns: auto minmax(15rem, 20rem);
	gap: var(--nui-space-md);
	align-items: center;
	min-height: 4rem;
	padding: var(--nui-space-md);
	background-color: var(--nui-surface);
	border-bottom: 1px solid var(--nui-border);
}

.nui-list-sort {
	display: flex;
	align-items: center;
	gap: var(--nui-space-sm);
}

.nui-list-sort label {
	white-space: nowrap;
	color: var(--nui-text-tertiary);
	font-size: var(--nui-font-size-sm);
}

.nui-list-sort nui-select {
	flex: 1;
	max-width: 17rem;
}

.nui-list-sort-direction {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 2.5rem;
	height: 2.5rem;
	padding: 0;
	border: 1px solid var(--nui-border);
	border-radius: var(--nui-radius-sm);
	background-color: var(--nui-surface);
	cursor: pointer;
	transition: background-color 0.2s;
}

.nui-list-sort-direction:hover {
	background-color: var(--nui-surface-hover);
}

.nui-list-sort-direction nui-icon {
	transition: transform 0.2s;
}

.nui-list-sort-direction.up nui-icon {
	transform: rotate(-90deg);
}

.nui-list-sort-direction.down nui-icon {
	transform: rotate(90deg);
}

.nui-list-search {
	display: flex;
}

/* ################################# VIEWPORT */

.nui-list-viewport {
	position: relative;
	flex: 1;
	overflow-x: hidden;
	overflow-y: auto;
	padding: var(--nui-space-md);
	padding-right: calc(var(--nui-space-md) * 2);
}

.nui-list-container {
	position: relative;
	/* Height set by JS based on item count */
}

/* Fixed mode overlay (for large lists) */
.nui-list-fixed {
	position: absolute;
	top: var(--nui-space-md);
	left: var(--nui-space-md);
	right: calc(var(--nui-space-md) + 2rem);
	bottom: var(--nui-space-md);
	overflow: hidden;
	z-index: 2;
	pointer-events: none;
}

.nui-list-fixed > * {
	pointer-events: auto;
}

nui-list[data-mode="fixed"] .nui-list-fixed {
	display: block;
}

nui-list:not([data-mode="fixed"]) .nui-list-fixed {
	display: none;
}

/* Scrollbar styling */
.nui-list-viewport::-webkit-scrollbar {
	width: 1rem;
}

/* ################################# FOOTER */

.nui-list-footer {
	position: relative;
	display: grid;
	grid-auto-columns: 1fr;
	grid-auto-flow: column;
	align-items: center;
	min-height: 4rem;
	padding: var(--nui-space-md);
	background-color: var(--nui-surface);
	border-top: 1px solid var(--nui-border);
	gap: var(--nui-space-md);
}

.nui-list-footer-left {
	display: flex;
	align-items: center;
	gap: var(--nui-space-sm);
}

.nui-list-footer-center {
	display: flex;
	justify-content: center;
	align-items: center;
}

.nui-list-footer-info {
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: var(--nui-font-size-sm);
	min-height: 1.8rem;
	border-radius: var(--nui-radius-sm);
	padding-inline: calc(var(--nui-space-md) * 1.5);
	color: var(--nui-text-tertiary);
}

.nui-list-footer-right {
	display: flex;
	justify-content: flex-end;
	align-items: center;
	gap: var(--nui-space-sm);
}

/* ################################# ITEMS (GENERAL) */

.nui-list-item {
	position: absolute;
	width: 100%;
	cursor: pointer;
	transition: background-color 0.15s;
}

.nui-list-item:hover {
	background-color: var(--nui-surface-hover);
}

.nui-list-item.selected {
	background-color: var(--nui-accent-subtle);
	color: var(--nui-accent-text);
}

/* ################################# ITEM VARIANTS */

/* Log item (simple, single line) */
.nui-list-log-item {
	display: flex;
	align-items: center;
	height: 3rem;
	margin-bottom: calc(var(--nui-space-xs) * 0.5);
	padding: 0;
	background-color: var(--nui-shade-2);
	color: var(--nui-text-secondary);
	font-size: var(--nui-font-size-sm);
	border-radius: var(--nui-radius-sm);
	overflow: hidden;
}

.nui-list-log-item:hover {
	background-color: var(--nui-shade-3);
	color: var(--nui-text);
}

.nui-list-log-item.selected {
	background-color: var(--nui-accent-subtle);
}

.nui-list-log-item > div:nth-child(1) {
	display: flex;
	justify-content: center;
	align-items: center;
	width: 60px;
	height: 100%;
	background-color: var(--nui-shade-1);
	font-size: var(--nui-font-size-xs);
	text-align: center;
	pointer-events: none;
}

.nui-list-log-item > div:nth-child(2) {
	display: flex;
	align-items: center;
	flex: 1;
	padding-inline: var(--nui-space-md);
	height: 100%;
	pointer-events: none;
}

.nui-list-log-item > div:nth-child(3) {
	display: flex;
	justify-content: center;
	align-items: center;
	width: 12rem;
	height: 100%;
	margin-left: auto;
	background-color: var(--nui-shade-1);
	font-size: var(--nui-font-size-sm);
	opacity: 0.7;
	pointer-events: none;
}

/* Standard list item (with image/thumbnail support) */
.nui-list-standard-item {
	display: flex;
	align-items: center;
	height: 4rem;
	margin-bottom: calc(var(--nui-space-xs) * 0.5);
	padding: 0;
	background-color: var(--nui-shade-2);
	color: var(--nui-text-secondary);
	border-radius: var(--nui-radius-sm);
	overflow: hidden;
}

.nui-list-standard-item:hover {
	background-color: var(--nui-shade-3);
	color: var(--nui-text);
}

.nui-list-standard-item.selected {
	background-color: var(--nui-accent-subtle);
}

/* Index column */
.nui-list-standard-item > div:nth-child(1) {
	display: flex;
	justify-content: center;
	align-items: center;
	width: 4rem;
	height: 100%;
	background-color: var(--nui-shade-1);
	font-size: var(--nui-font-size-xs);
	text-align: center;
	pointer-events: none;
}

/* Image/thumbnail column */
.nui-list-standard-item > div:nth-child(2) {
	display: flex;
	justify-content: center;
	align-items: center;
	width: calc(4rem * 1.77); /* 16:9 aspect ratio */
	height: 100%;
	background-color: var(--nui-shade-1);
	pointer-events: none;
}

.nui-list-standard-item > div:nth-child(2) img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	transition: opacity 0.3s ease-out;
}

/* Name/title column */
.nui-list-standard-item > div:nth-child(3) {
	display: flex;
	align-items: center;
	flex: 1;
	padding-inline: var(--nui-space-md);
	height: 100%;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	pointer-events: none;
}

/* Info/meta column */
.nui-list-standard-item > div:nth-child(4) {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: flex-end;
	width: 12rem;
	height: 100%;
	padding-inline: var(--nui-space-sm);
	background-color: var(--nui-shade-1);
	font-size: var(--nui-font-size-sm);
	pointer-events: none;
	gap: calc(var(--nui-space-xs) * 0.5);
}

.nui-list-standard-item > div:nth-child(4) div:nth-child(2) {
	opacity: 0.6;
}

/* ################################# RESPONSIVE */

@media only screen and (max-width: 768px) {
	.nui-list-header {
		grid-template-columns: 1fr;
		gap: var(--nui-space-sm);
	}
	
	.nui-list-footer {
		grid-template-columns: 1fr;
		gap: var(--nui-space-sm);
	}
	
	.nui-list-footer-left,
	.nui-list-footer-center,
	.nui-list-footer-right {
		justify-content: center;
	}
	
	/* Hide meta columns on mobile */
	.nui-list-standard-item > div:nth-child(1),
	.nui-list-standard-item > div:nth-child(4) {
		display: none;
	}
}

/* ################################# UTILITIES */

/* Hide scrollbar when not needed */
nui-list[data-scroll="false"] .nui-list-viewport {
	overflow-y: hidden;
}

/* Compact mode - smaller items */
nui-list[data-compact="true"] .nui-list-log-item {
	height: 2rem;
	font-size: calc(var(--nui-font-size-sm) * 0.9);
}

nui-list[data-compact="true"] .nui-list-standard-item {
	height: 3rem;
}

/* Loading state */
nui-list[data-loading="true"] .nui-list-viewport {
	opacity: 0.5;
	pointer-events: none;
}
